<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ethan Blair — Portfolio</title>
  <meta name="description" content="Ethan Blair: programmer focused on enterprise technology, automation, and AI development." />
  <link rel="canonical" href="https://i3t4an.github.io/" />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Ethan Blair — Portfolio" />
  <meta property="og:description" content="Programmer focused on enterprise technology, automation, and AI development." />
  <meta property="og:url" content="https://i3t4an.github.io/" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Ethan Blair — Portfolio" />
  <meta name="twitter:description" content="Programmer focused on enterprise technology, automation, and AI development." />

  <!-- Theme colors -->
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0a0b0f" />

  <!-- JSON-LD Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Ethan Blair",
    "url": "https://i3t4an.github.io/",
    "email": "mailto:i3t4an@gmail.com",
    "affiliation": {"@type": "CollegeOrUniversity", "name": "University of Northern Colorado"},
    "sameAs": [
      "https://github.com/i3T4AN",
      "https://www.linkedin.com/in/ethan-blair-99a3b72a2"
    ],
    "jobTitle": "Programmer",
    "knowsAbout": [
      "Enterprise technology", "Automation", "AI development",
      "Microsoft Intune", "Microsoft SCCM", "Power BI",
      "JavaScript", "TypeScript", "React", "Node.js", "Python",
      "C#", "Objective-C", "PowerShell", "AppleScript"
    ]
  }
  </script>

  <style>
    /* ========== CSS Custom Properties ========== */
    :root {
      /* Light theme colors */
      --bg: #ffffff;
      --bg-secondary: #f8fafc;
      --surface: #ffffff;
      --surface-elevated: #ffffff;
      --text-primary: #0f172a;
      --text-secondary: #475569;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --border-light: #f1f5f9;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
      --accent-contrast: #ffffff;
      --success: #10b981;
      --warning: #f59e0b;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
      
      /* Focus styles */
      --focus: 0 0 0 3px rgb(59 130 246 / 0.1);
      
      /* Spacing scale */
      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      
      /* Border radius */
      --radius-sm: 0.375rem;
      --radius: 0.5rem;
      --radius-lg: 0.75rem;
      --radius-xl: 1rem;
    }

    /* Dark theme overrides */
    .theme-dark {
      --bg: #0a0b0f;
      --bg-secondary: #111318;
      --surface: #1e293b;
      --surface-elevated: #334155;
      --text-primary: #f8fafc;
      --text-secondary: #cbd5e1;
      --text-muted: #94a3b8;
      --border: #334155;
      --border-light: #1e293b;
      --accent: #60a5fa;
      --accent-hover: #3b82f6;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
    }

    /* ========== Base Styles ========== */
    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      background: var(--bg);
      color: var(--text-primary);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    img {
      max-width: 100%;
      height: auto;
      display: block;
    }

    a {
      color: var(--accent);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    a:hover {
      color: var(--accent-hover);
    }

    /* Focus styles for accessibility */
    a:focus-visible,
    button:focus-visible,
    select:focus-visible {
      outline: none;
      box-shadow: var(--focus);
      border-radius: var(--radius-sm);
    }

    /* ========== Layout Components ========== */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 var(--space-md);
    }

    .stack {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
    }

    .stack-lg {
      display: flex;
      flex-direction: column;
      gap: var(--space-xl);
    }

    /* ========== Skip Link (Accessibility) ========== */
    .skip-link {
      position: absolute;
      left: -9999px;
      top: auto;
      width: 1px;
      height: 1px;
      overflow: hidden;
    }

    .skip-link:focus {
      left: var(--space-md);
      top: var(--space-md);
      width: auto;
      height: auto;
      background: var(--accent);
      color: var(--accent-contrast);
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius);
      z-index: 1000;
      text-decoration: none;
    }

    /* ========== Header & Navigation ========== */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: saturate(120%) blur(20px);
      border-bottom: 1px solid var(--border-light);
      transition: all 0.3s ease;
    }

    .theme-dark header {
      background: rgba(10, 11, 15, 0.8);
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
      padding: var(--space-md) 0;
      min-height: 4rem;
    }

    .brand h1 {
      font-size: 1.25rem;
      font-weight: 700;
      margin: 0;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .brand p {
      margin: 0;
      color: var(--text-secondary);
      font-size: 0.875rem;
      margin-top: var(--space-xs);
    }

    .theme-toggle {
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-primary);
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      cursor: pointer;
      font-size: 0.875rem;
      font-weight: 500;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: var(--space-xs);
    }

    .theme-toggle:hover {
      background: var(--bg-secondary);
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    /* ========== Main Content ========== */
    main {
      display: block;
    }

    /* Hero Section */
    .hero {
      padding: var(--space-2xl) 0;
      background: linear-gradient(135deg, var(--bg) 0%, var(--bg-secondary) 100%);
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
      pointer-events: none;
    }

    .hero .container {
      position: relative;
      z-index: 1;
    }

    .hero h2 {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 800;
      margin: 0 0 var(--space-md);
      line-height: 1.1;
      letter-spacing: -0.02em;
    }

    .hero p {
      color: var(--text-secondary);
      max-width: 60ch;
      font-size: 1.125rem;
      margin: 0;
    }

    /* Contact Section */
    .contact-section {
      padding: var(--space-xl) 0;
    }

    .cta {
      display: flex;
      gap: var(--space-md);
      margin-top: var(--space-lg);
      flex-wrap: wrap;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      border-radius: var(--radius-lg);
      padding: var(--space-md) var(--space-lg);
      font-weight: 600;
      font-size: 0.875rem;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-primary);
      box-shadow: var(--shadow-sm);
      text-decoration: none;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .btn:hover {
      background: var(--bg-secondary);
      transform: translateY(-2px);
      box-shadow: var(--shadow);
      color: var(--text-primary);
    }

    .btn.primary {
      background: var(--accent);
      color: var(--accent-contrast);
      border-color: var(--accent);
    }

    .btn.primary:hover {
      background: var(--accent-hover);
      color: var(--accent-contrast);
    }

    /* ========== Sections ========== */
    section {
      padding: var(--space-2xl) 0;
    }

    section h3 {
      font-size: 2rem;
      font-weight: 700;
      margin: 0 0 var(--space-lg);
      color: var(--text-primary);
    }

    /* Skills Section */
    .cols {
      display: grid;
      gap: var(--space-lg);
      grid-template-columns: 1fr;
    }

    @media (min-width: 768px) {
      .cols {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .col {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-xl);
      padding: var(--space-lg);
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
    }

    .col:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .col h4 {
      font-size: 1.125rem;
      font-weight: 600;
      margin: 0 0 var(--space-md);
      color: var(--text-primary);
    }

    .col ul {
      margin: 0;
      padding-left: var(--space-lg);
      color: var(--text-secondary);
    }

    .col li {
      margin-bottom: var(--space-sm);
    }

    /* ========== Projects Section ========== */
    .controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
      flex-wrap: wrap;
      margin-bottom: var(--space-xl);
      padding: var(--space-lg);
      background: var(--surface);
      border-radius: var(--radius-xl);
      border: 1px solid var(--border);
    }

    .filters {
      display: flex;
      gap: var(--space-sm);
      flex-wrap: wrap;
    }

    .chip {
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-secondary);
      padding: var(--space-sm) var(--space-md);
      border-radius: 9999px;
      font-size: 0.875rem;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .chip:hover {
      background: var(--bg-secondary);
      color: var(--text-primary);
    }

    .chip[aria-pressed="true"] {
      background: var(--accent);
      color: var(--accent-contrast);
      border-color: var(--accent);
    }

    .sort {
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-primary);
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius);
      font-size: 0.875rem;
      cursor: pointer;
    }

    /* Project Groups */
    .group {
      margin-bottom: var(--space-2xl);
    }

    .group h4 {
      margin: 0 0 var(--space-lg);
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      gap: var(--space-md);
    }

    .group h4::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    /* Grid Layout */
    .grid {
      display: grid;
      gap: var(--space-lg);
      grid-template-columns: 1fr;
    }

    @media (min-width: 640px) {
      .grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* ========== Project Cards with Animations ========== */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-xl);
      padding: var(--space-lg);
      box-shadow: var(--shadow-sm);
      display: grid;
      gap: var(--space-md);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0;
      transform: translateY(20px);
      position: relative;
      overflow: hidden;
    }

    /* Scroll Animation Classes */
    .card.animate-in {
      opacity: 1;
      transform: translateY(0);
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-lg);
      border-color: var(--accent);
    }

    .card h5 {
      margin: 0;
      font-size: 1.125rem;
      font-weight: 600;
    }

    .card h5 a {
      color: var(--text-primary);
      text-decoration: none;
    }

    .card h5 a:hover {
      color: var(--accent);
    }

    .desc {
      color: var(--text-secondary);
      min-height: 3em;
      line-height: 1.5;
    }

    .meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-sm);
      flex-wrap: wrap;
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    .lang {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      border: 1px solid var(--border);
      background: var(--bg-secondary);
      padding: var(--space-xs) var(--space-sm);
      border-radius: 9999px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .actions {
      display: flex;
      justify-content: flex-end;
      align-items: center;
    }

    .gh-link {
      font-size: 0.875rem;
      font-weight: 500;
    }

    /* ========== Empty States ========== */
    .empty {
      border: 2px dashed var(--border);
      padding: var(--space-xl);
      border-radius: var(--radius-xl);
      background: var(--bg-secondary);
      color: var(--text-muted);
      text-align: center;
      font-weight: 500;
    }

    /* ========== Footer ========== */
    footer {
      border-top: 1px solid var(--border);
      padding: var(--space-xl) 0;
      color: var(--text-muted);
      text-align: center;
      background: var(--bg-secondary);
    }

    /* ========== Accessibility ========== */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* ========== Responsive Design ========== */
    @media (max-width: 640px) {
      .nav {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-md);
      }

      .brand {
        width: 100%;
      }

      .controls {
        flex-direction: column;
        align-items: flex-start;
      }

      .hero h2 {
        font-size: 2rem;
      }
    }

    /* ========== Animation Delays for Staggered Effect ========== */
    .card:nth-child(1) { transition-delay: 0ms; }
    .card:nth-child(2) { transition-delay: 100ms; }
    .card:nth-child(3) { transition-delay: 200ms; }
    .card:nth-child(4) { transition-delay: 300ms; }
    .card:nth-child(5) { transition-delay: 400ms; }
    .card:nth-child(6) { transition-delay: 500ms; }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <!-- Header with Navigation -->
  <header role="banner">
    <div class="container nav" aria-label="Primary">
      <div class="brand">
        <h1>Ethan Blair</h1>
        <p>Exploring enterprise systems, automation, and AI development</p>
      </div>
      <nav aria-label="Main navigation">
        <button id="themeToggle" class="theme-toggle" aria-pressed="false" aria-label="Toggle dark or light theme">
          🌗 Theme
        </button>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main" tabindex="-1">
    <!-- Hero Section -->
    <section class="hero">
      <div class="container">
        <h2>Building practical tools for enterprise systems.</h2>
        <p>
          I'm Ethan Blair, a student at the University of Northern Colorado. My focus is on enterprise technology, automation, and AI development. I enjoy building practical tools that make systems work more efficiently. This site highlights some of the projects and ideas I'm working on.
        </p>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section" aria-labelledby="contact-title">
      <div class="container stack">
        <h3 id="contact-title">Contact</h3>
        <div class="cta" role="group" aria-label="Contact links">
          <a class="btn primary" href="https://github.com/i3T4AN" target="_blank" rel="noopener">GitHub</a>
          <a class="btn" href="https://www.linkedin.com/in/ethan-blair-99a3b72a2" target="_blank" rel="noopener">LinkedIn</a>
          <a class="btn" href="mailto:i3t4an@gmail.com">Email</a>
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" aria-labelledby="skills-title">
      <div class="container stack-lg">
        <h3 id="skills-title">Skills</h3>
        <div class="cols">
          <div class="col" aria-labelledby="skills-dev">
            <h4 id="skills-dev">Programming &amp; Development</h4>
            <ul>
              <li>JavaScript/TypeScript, React, Node.js, Python</li>
              <li>C#, Objective-C</li>
              <li>PowerShell, AppleScript, Xcode</li>
            </ul>
          </div>
          <div class="col" aria-labelledby="skills-automation">
            <h4 id="skills-automation">AI, QA &amp; Automation</h4>
            <ul>
              <li>AI Agent Development (Microsoft Copilot Studio, Power Automate)</li>
              <li>Mabl (Automated QA Testing)</li>
            </ul>
          </div>
          <div class="col" aria-labelledby="skills-cloud">
            <h4 id="skills-cloud">Cloud, Systems &amp; Tools</h4>
            <ul>
              <li>Microsoft Azure, Microsoft Intune, Microsoft SCCM, Microsoft Power BI</li>
              <li>macOS, Windows, Linux</li>
              <li>Q-SYS (AV Integration)</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" aria-labelledby="projects-title">
      <div class="container">
        <!-- Project Controls -->
        <div class="controls" role="region" aria-label="Project controls">
          <div class="filters" id="filters" role="toolbar" aria-label="Language filters">
            <!-- Language filter chips will be inserted here by JavaScript -->
          </div>
          <label for="sort" class="sr-only">Sort projects</label>
          <select id="sort" class="sort" aria-label="Sort projects">
            <option value="updated">Sort: Last Updated</option>
            <option value="stars">Sort: Stars</option>
            <option value="name">Sort: Name</option>
          </select>
        </div>

        <h3 id="projects-title">Projects</h3>

        <!-- Project Groups -->
        <div class="group" aria-labelledby="group-dev">
          <h4 id="group-dev">Programming / Development</h4>
          <div id="grid-dev" class="grid" role="list"></div>
        </div>

        <div class="group" aria-labelledby="group-ai">
          <h4 id="group-ai">Automation &amp; AI</h4>
          <div id="grid-ai" class="grid" role="list"></div>
        </div>

        <div class="group" aria-labelledby="group-enterprise">
          <h4 id="group-enterprise">Enterprise Systems / Cloud</h4>
          <div id="grid-enterprise" class="grid" role="list"></div>
        </div>

        <!-- Loading/Error States -->
        <div id="projects-empty" class="empty" hidden>
          Couldn't load project data right now. GitHub API limits happen. Links still work below.
        </div>
        <div id="status" class="sr-only" role="status" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer role="contentinfo">
    <div class="container">
      <small>© <span id="year"></span> Ethan Blair</small>
    </div>
  </footer>

  <script>
  (function() {
    "use strict";

    // ========== Utility Functions ==========
    const $ = (selector, root = document) => root.querySelector(selector);
    const $$ = (selector, root = document) => Array.from(root.querySelectorAll(selector));

    // Repository configuration - organized by project type
    const repos = [
      // Programming / Development projects
      { group: "dev", url: "https://github.com/i3T4AN/csv-watcher" },
      { group: "dev", url: "https://github.com/i3T4AN/sudokusolver-resume" },
      { group: "dev", url: "https://github.com/i3T4AN/numberguesser-resume" },
      { group: "dev", url: "https://github.com/i3T4AN/weatherCLI" },
      
      // Automation & AI projects
      { group: "ai", url: "https://github.com/i3T4AN/Agent_Example" },
      
      // Enterprise Systems / Cloud projects
      { group: "enterprise", url: "https://github.com/i3T4AN/applescript-device-rename" },
      { group: "enterprise", url: "https://github.com/i3T4AN/SCCM-font-install-no-restart" },
      { group: "enterprise", url: "https://github.com/i3T4AN/azuread-inactive-users-export" },
      { group: "enterprise", url: "https://github.com/i3T4AN/SAD_Group_Proj" },
    ];

    // ========== GitHub API Functions ==========
    
    /**
     * Parse GitHub repository URL to extract owner and name
     */
    const parseRepoPath = (fullUrl) => {
      try {
        const url = new URL(fullUrl);
        const [owner, name] = url.pathname.replace(/^\//, "").split("/");
        return { owner, name };
      } catch {
        return null;
      }
    };

    /**
     * Format relative time (e.g., "2 weeks ago")
     */
    const relativeTime = (dateString) => {
      const date = new Date(dateString);
      const now = new Date();
      const diff = Math.round((date.getTime() - now.getTime()) / 1000);
      const rtf = new Intl.RelativeTimeFormat(undefined, { numeric: "auto" });
      
      const ranges = {
        year: 3600 * 24 * 365,
        month: 3600 * 24 * 30,
        week: 3600 * 24 * 7,
        day: 3600 * 24,
        hour: 3600,
        minute: 60,
        second: 1
      };

      for (const [unit, seconds] of Object.entries(ranges)) {
        const delta = diff / seconds;
        if (Math.abs(delta) >= 1 || unit === 'second') {
          return rtf.format(Math.round(delta), unit);
        }
      }
    };

    /**
     * Create a description from repository name if none exists
     */
    const synthesizeDescription = (name) => {
      return name.replace(/[-_]/g, ' ').replace(/\b\w/g, (m) => m.toUpperCase());
    };

    /**
     * Update status for screen readers
     */
    const updateStatus = (message) => {
      const statusEl = $("#status");
      if (statusEl) statusEl.textContent = message;
    };

    // ========== Session Storage Cache ==========
    const cacheGet = (key) => {
      try {
        return JSON.parse(sessionStorage.getItem(key));
      } catch {
        return null;
      }
    };

    const cacheSet = (key, value) => {
      try {
        sessionStorage.setItem(key, JSON.stringify(value));
      } catch {
        // Silently fail if storage is not available
      }
    };

    /**
     * Fetch repository data from GitHub API with caching
     */
    const fetchRepo = async (owner, name) => {
      const cacheKey = `gh:${owner}/${name}`;
      const cached = cacheGet(cacheKey);
      
      if (cached) {
        return cached;
      }

      const apiUrl = `https://api.github.com/repos/${owner}/${name}`;
      
      try {
        const response = await fetch(apiUrl, {
          headers: { 'Accept': 'application/vnd.github+json' }
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }

        const data = await response.json();
        
        // Map API response to our format
        const mappedData = {
          full_name: data.full_name,
          html_url: data.html_url,
          description: data.description || synthesizeDescription(name),
          language: data.language || 'Other',
          stargazers_count: data.stargazers_count || 0,
          updated_at: data.updated_at || new Date().toISOString(),
          name,
          error: false
        };

        cacheSet(cacheKey, mappedData);
        return mappedData;
        
      } catch (error) {
        console.warn(`Failed to fetch ${owner}/${name}:`, error);
        
        // Return fallback data
        return {
          full_name: `${owner}/${name}`,
          html_url: `https://github.com/${owner}/${name}`,
          description: synthesizeDescription(name),
          language: 'Other',
          stargazers_count: 0,
          updated_at: new Date().toISOString(),
          name,
          error: true
        };
      }
    };

    // ========== Theme Toggle ==========
    const THEME_KEY = "theme";

    const applyTheme = (theme) => {
      const html = document.documentElement;
      const isDark = theme === "dark";
      
      html.classList.toggle("theme-dark", isDark);
      
      const toggleBtn = $("#themeToggle");
      if (toggleBtn) {
        toggleBtn.setAttribute("aria-pressed", String(isDark));
        toggleBtn.title = isDark ? "Switch to light theme" : "Switch to dark theme";
      }
    };

    const initTheme = () => {
      // Check for saved theme preference or default to system preference
      const savedTheme = localStorage.getItem(THEME_KEY);
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const initialTheme = savedTheme || (prefersDark ? "dark" : "light");
      
      applyTheme(initialTheme);

      // Add event listener for theme toggle
      const themeToggle = $("#themeToggle");
      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          const isDark = document.documentElement.classList.toggle('theme-dark');
          const newTheme = isDark ? 'dark' : 'light';
          localStorage.setItem(THEME_KEY, newTheme);
          themeToggle.setAttribute('aria-pressed', String(isDark));
          
          // Update contributions graph for new theme
          updateGitHubStats(isDark);
        });

        // Handle keyboard interaction
        themeToggle.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            themeToggle.click();
          }
        });
      }
    };

    // ========== Projects Rendering ==========
    
    // Application state
    const state = {
      repos: [],
      filter: 'All',
      sort: 'updated',
      languages: new Set(['All'])
    };

    /**
     * Create a project card HTML element
     */
    const buildCard = (repo) => {
      const article = document.createElement('article');
      article.className = 'card';
      article.setAttribute('role', 'listitem');
      
      article.innerHTML = `
        <h5>
          <a href="${repo.html_url}" target="_blank" rel="noopener" aria-label="Open ${repo.full_name} on GitHub">
            ${repo.name}
          </a>
        </h5>
        <p class="desc">${repo.description}</p>
        <div class="meta">
          <span class="lang" aria-label="Primary language">${repo.language}</span>
          <span aria-label="Stars">★ ${repo.stargazers_count}</span>
          <span aria-label="Last updated">Updated: ${relativeTime(repo.updated_at)}</span>
        </div>
        <div class="actions">
          <a class="btn gh-link" href="${repo.html_url}" target="_blank" rel="noopener" 
             aria-label="View ${repo.full_name} on GitHub">
            View on GitHub
          </a>
        </div>
      `;

      // Add error indicator if data is incomplete
      if (repo.error) {
        article.title = 'Partial data shown (API limit or error).';
      }

      return article;
    };

    // Sorting functions
    const sorters = {
      updated: (a, b) => new Date(b.updated_at) - new Date(a.updated_at),
      stars: (a, b) => (b.stargazers_count || 0) - (a.stargazers_count || 0),
      name: (a, b) => a.name.localeCompare(b.name)
    };

    /**
     * Render projects with filtering and sorting
     */
    const renderProjects = () => {
      const { filter, sort } = state;
      
      // Group projects by category
      const groups = { dev: [], ai: [], enterprise: [] };
      
      for (const repo of state.repos) {
        // Apply language filter
        if (filter !== 'All' && repo.language !== filter) continue;
        groups[repo.__group].push(repo);
      }

      // Sort each group
      for (const key of Object.keys(groups)) {
        groups[key].sort(sorters[sort]);
      }

      // Render each group
      const grids = {
        dev: $('#grid-dev'),
        ai: $('#grid-ai'),
        enterprise: $('#grid-enterprise')
      };

      for (const [key, grid] of Object.entries(grids)) {
        grid.innerHTML = '';
        const projectList = groups[key];
        
        if (!projectList.length) {
          const emptyState = document.createElement('div');
          emptyState.className = 'empty';
          emptyState.textContent = 'No projects match the current filter.';
          grid.appendChild(emptyState);
        } else {
          projectList.forEach(project => {
            const card = buildCard(project);
            grid.appendChild(card);
          });
        }
      }

      // Update language filter chips
      updateFilterChips();
      
      // Trigger scroll animations for newly rendered cards
      requestAnimationFrame(triggerScrollAnimations);
      
      // Update status for screen readers
      const totalProjects = groups.dev.length + groups.ai.length + groups.enterprise.length;
      updateStatus(`${totalProjects} project cards displayed`);
    };

    /**
     * Update language filter chips dynamically based on available languages
     */
    const updateFilterChips = () => {
      const filtersContainer = $('#filters');
      filtersContainer.innerHTML = '';

      // Create chips - "All" first, then alphabetical order of all discovered languages
      const sortedLanguages = Array.from(state.languages)
        .filter(lang => lang !== 'All')
        .sort((a, b) => a.localeCompare(b));
      
      const allLanguages = ['All', ...sortedLanguages];

      allLanguages.forEach(language => {
        const chip = document.createElement('button');
        chip.className = 'chip';
        chip.type = 'button';
        chip.setAttribute('aria-pressed', String(state.filter === language));
        chip.textContent = language;
        
        chip.addEventListener('click', () => {
          state.filter = language;
          renderProjects();
        });
        
        filtersContainer.appendChild(chip);
      });

      // Debug: log available languages
      console.log('Filter chips created for languages:', allLanguages);
    };

    // ========== Scroll Animations ==========
    
    /**
     * Intersection Observer for scroll animations
     */
    const createScrollObserver = () => {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate-in');
            observer.unobserve(entry.target); // Only animate once
          }
        });
      }, {
        threshold: 0.1,
        rootMargin: '50px'
      });

      return observer;
    };

    let scrollObserver;

    /**
     * Apply scroll animations to all project cards
     */
    const triggerScrollAnimations = () => {
      if (scrollObserver) {
        scrollObserver.disconnect();
      }

      scrollObserver = createScrollObserver();
      
      // Observe all project cards
      const cards = $$('.card');
      cards.forEach(card => {
        card.classList.remove('animate-in');
        scrollObserver.observe(card);
      });
    };

    // ========== Data Loading ==========
    
    /**
     * Load all repository data from GitHub API
     */
    const loadAllRepos = async () => {
      updateStatus('Loading repositories…');
      
      const repoData = [];
      
      // Fetch data for each repository
      for (const item of repos) {
        const parsed = parseRepoPath(item.url);
        if (!parsed) continue;

        const data = await fetchRepo(parsed.owner, parsed.name);
        data.__group = item.group; // Track which section this belongs to
        repoData.push(data);

        // Collect language for filter chips
        if (data.language) {
          state.languages.add(data.language);
        }
      }

      state.repos = repoData;
      updateStatus('Repositories loaded');
      renderProjects();
    };

    // ========== Initialization ==========
    
    /**
     * Initialize the application when DOM is ready
     */
    const init = () => {
      // Set current year in footer
      const yearElement = $('#year');
      if (yearElement) {
        yearElement.textContent = String(new Date().getFullYear());
      }

      // Initialize theme system
      initTheme();

      // Set up sort control
      const sortSelect = $('#sort');
      if (sortSelect) {
        sortSelect.addEventListener('change', () => {
          state.sort = sortSelect.value;
          renderProjects();
        });
      }

      // Load and render projects
      loadAllRepos().catch((error) => {
        console.error('Failed to load repositories:', error);
        const emptyElement = $('#projects-empty');
        if (emptyElement) {
          emptyElement.hidden = false;
        }
      });
    };

    // Start the application when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }

  })();
  </script>
</body>
</html>
